<actionGroup>
  <actionList>
    <deleteFile path="${system_temp_directory}/auth.html">
	<ruleList>
	    <fileExists path="${system_temp_directory}/auth.html" />
	</ruleList>
    </deleteFile>
    <deleteFile path="${system_temp_directory}/error.html">
	<ruleList>
	    <fileExists path="${system_temp_directory}/error.html" />
	</ruleList>
    </deleteFile>
    <deleteFile path="${system_temp_directory}/bt.html">
	<ruleList>
	    <fileExists path="${system_temp_directory}/bt.html" />
	</ruleList>
    </deleteFile>
    <!-- Write the registered user-name to INI File -->
    <actionGroup>
	<actionList>
	    <iniFileSet file="@@REGISTRY_INI@@" section="Global_machine_id" key="MachineID" value="${machine_id}" />
	    <iniFileSet file="@@REGISTRY_INI@@" section="@@REGISTRY_PREFIX@@" key="Username" value="${existingEmail}" />
	    <iniFileSet file="@@REGISTRY_INI@@" section="@@REGISTRY_PREFIX@@" key="InstallationID" value="${installation_id}" />
	</actionList>
	<ruleList>
	    <compareText text="${platform_name}" logic="does_not_equal" value="windows"/>
	</ruleList>
    </actionGroup>

    <actionGroup>
	<actionList>
	    <registrySet key="HKEY_LOCAL_MACHINE\SOFTWARE\EnterpriseDB\Global_machine_id" name="MachineID" value="${machine_id}" />
	    <registrySet key="HKEY_LOCAL_MACHINE\SOFTWARE\EnterpriseDB\@@REGISTRY_PREFIX_WIN@@" name="Username" value="${existingEmail}" />
	    <registrySet key="HKEY_LOCAL_MACHINE\SOFTWARE\EnterpriseDB\@@REGISTRY_PREFIX_WIN@@" name="InstallationID" value="${installation_id}" />
	</actionList>
        <ruleList>
	    <compareText text="${platform_name}" logic="equals" value="windows"/>
	</ruleList>
    </actionGroup>
    <deleteFile path="${system_temp_directory}/@@TEMPDIR@@" abortOnError="0" showMessageOnError="0"/>
  </actionList>
  <ruleList>
    <isTrue value="${is_internet_connected}" />
  </ruleList>
</actionGroup>
